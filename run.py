import sys
import paramiko

# Replace 'your_username', 'your_password' with your actual SSH username and password on the server
ssh_port = 8022
ssh_server = '10.200.116.221'
ssh_command_base = 'nmap'
ssh_command_op = '-o ~/results/result.txt'

def run_ssh_command(ssh_command):
    ssh_client = paramiko.SSHClient()
    ssh_client.set_missing_host_key_policy(paramiko.AutoAddPolicy())

    try:
        ssh_client.connect(hostname=ssh_server, port=ssh_port)
        full_command = f"{ssh_command_base} {ssh_command} {ssh_command_op}"
        stdin, stdout, stderr = ssh_client.exec_command(full_command)

        # Read the output of the command and print it
        output = stdout.read().decode('utf-8')
        print(output)

    except paramiko.AuthenticationException:
        print("Authentication failed. Please check your username and password.")
    except paramiko.SSHException as e:
        print(f"SSH error: {e}")
    finally:
        ssh_client.close()

if __name__ == "__main__":
    if len(sys.argv) != 2 or sys.argv[1] == '-h':
        print("Usage: python script.py -d <additional_input>")
        sys.exit(1)

    additional_input = sys.argv[1]
    run_ssh_command(additional_input)
